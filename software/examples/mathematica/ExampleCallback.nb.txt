Needs["NETLink`"]
LoadNETAssembly["Tinkerforge",NotebookDirectory[]<>"../.."]

host="localhost"
port=4223
uid="dmG"(* Change to your UID *)

(* Create IPConnection and device object *)
ipcon=NETNew["Tinkerforge.IPConnection"]
js=NETNew["Tinkerforge.BrickletJoystick",uid,ipcon]
ipcon@Connect[host,port]

(* Register callbacks for pressed and released events *)
PressedCB[sender_]:=Print["Pressed"]
AddEventHandler[js@Pressed,PressedCB]

ReleasedCB[sender_]:=Print["Released"]
AddEventHandler[js@Released,ReleasedCB]

Input["Click OK to exit"]

(* Clean up *)
ipcon@Disconnect[]
ReleaseNETObject[js]
ReleaseNETObject[ipcon]
